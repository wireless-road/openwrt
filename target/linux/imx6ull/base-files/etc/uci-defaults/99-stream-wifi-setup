#!/bin/sh
#
# Copyright (C) 2013-2015 OpenWrt.org
#

. /lib/functions/uci-defaults.sh

board=$(board_name)

board_config_update

case "$board" in
video_stream_wifi|\
audio_stream_wifi|\
flexcan_wifi|\
lorawan_gateway_wifi)
	touch /etc/config/wireless;
	uci set wireless.default_radio0=wifi-iface
	uci set wireless.@wifi-iface[0].mode="ap";
	uci set wireless.@wifi-iface[0].network="lan";
#	touch /etc/config/network;
#	uci set network.wlan='interface';
#	uci set network.wlan.proto='dhcp';
	uci commit;
	;;
*)
	;;
esac

case "$board" in
gs)
	uci set wireless.@wifi-iface[0].hidden="1";
	uci set wireless.@wifi-iface[0].ssid="openwrt";
	uci set wireless.@wifi-iface[0].encryption="psk2";
	uci set wireless.@wifi-iface[0].key="12345678";
	uci commit;
	;;
lorawan_gateway_wifi)
	uci set wireless.radio0=wifi-device
    uci set wireless.radio0.type='mac80211'
	uci set wireless.radio0.path='soc0/soc/2100000.aips-bus/2194000.usdhc/mmc_host/mmc1/mmc1:0001/mmc1:0001:1'
	uci set wireless.radio0.channel='1'
	uci set wireless.radio0.band='2g'
	uci set wireless.radio0.htmode='HT20'
	uci set wireless.radio0.short_preamble='1'
	uci set wireless.@wifi-iface[0]=wifi-iface
	uci set wireless.@wifi-iface[0].device='radio0'
	uci set wireless.@wifi-iface[0].ifname='sta0'
	uci set wireless.@wifi-iface[0].ssid='test-svc'
	uci set wireless.@wifi-iface[0].encryption='psk2'
	uci set wireless.@wifi-iface[0].key='a12345678a'
	uci set wireless.@wifi-iface[0].mode='sta'
	uci set wireless.@wifi-iface[0].disabled='0'
	uci set wireless.ap=wifi-iface
	uci set wireless.ap.device='radio0'
	uci set wireless.ap.ifname='ap0'
	uci set wireless.ap.mode='ap'
	uci set wireless.ap.ssid='m2mtele.com'
	uci set wireless.ap.encryption='psk2'
	uci set wireless.ap.key='12345678'
	uci set wireless.ap.disabled='0'
	uci commit wireless
	;;
*)
	;;
esac

board_config_flush

exit 0
