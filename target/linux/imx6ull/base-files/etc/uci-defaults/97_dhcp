#!/bin/sh
#
# Copyright (C) 2013-2015 OpenWrt.org
#

. /lib/functions/uci-defaults.sh

board=$(board_name)

board_config_update

case "$board" in
lorawan_gateway_ethernet |\
lorawan_gateway_ethernet_bridged)
	uci delete network.lan
	uci delete network.@device[0]
	uci delete network.globals
	uci set network.lan=interface
	uci set network.lan.proto='dhcp'
	uci set network.lan.device='eth0'
	/etc/init.d/network restart
	;;

lorawan_gateway_3g)
	uci delete network.lan
	uci delete network.@device[0]
	uci delete network.globals
	uci set network.lan=interface
	uci set network.lan.proto='static'
	uci set network.lan.device='eth0'
	uci set network.lan.ipaddr='192.168.1.1/24'
	;;

gs)
	uci delete network.lan
	uci delete network.@device[0]
	uci delete network.globals
	uci set network.lan=interface
	uci set network.lan.device='wlan0'
	uci set network.lan.proto='static'
	uci set network.lan.ipaddr='192.168.1.1/24'
esac

board_config_flush

exit 0
